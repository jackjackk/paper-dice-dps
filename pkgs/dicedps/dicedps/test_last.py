from argparse import Namespace
from dicedps.dice_helper import args2dice

from dicedps.plot.common import *

dc: DiceDoeclim2 = args2dice('-a borgpy -i 1 -c doeclim -u 1 -w 1000 -e 2250 -s 1 -o v2 -C med -t -O output/dicedps -m time2')

print(dc.run_and_ret_objs(np.r_[np.zeros(4), 1.2*np.ones(38), np.linspace(1.2,0.5,5)]))

#o.oset2epss['v2']

"""
args = Namespace(algo='borgpy', climate='doeclim', climcalib='med', climt0=True, con='inertmax', damfunc=1, dryrun=True, endyear=2250, hours=1, iseed=3, islands=1, maxrate=4, miu='time', nfe=10000, nunc='1', obj='v2', outpath='output/dicedps', procs=100, queue='kzk10_a_g_sc_default', rbfn=4, reset=False, seeds=1, sows='1000', thres=1)

dc = args2dice(args)
miu = [0.223617667374343326303,0.375632250244256060689,0.417175452811665348207,0.425451602039964071889,0.456390049526784691292,0.624506604739912041246,0.545440707411833591856,0.551039048158274979983,0.674555085161129719395,0.673032871593832182633,0.613164352775182219801,0.676873496153005071996,0.71519936418500529296,0.659005105546219049906,0.654492977492378447124,0.654943275243075828662,0.711615590467004177633,0.751615169073372224595,0.690305188296569727235,0.85692990400677149232,0.723964001080525165754,0.633192735427136721427,0.645895954404003269644,0.534612378796961329463,0.529698738449864148237,0.472365262050806256067,0.435880847120988290655,0.569255577968277637346,0.609670928419314916979,0.664014221271167381921,0.649254758303365320238,0.627964047202451469687,0.677258499013793535681,0.509647724376079747088,0.489668363476312484828,0.57004501520257988556,0.715609232843518738854,0.568526470056892940796,0.622946571359607292884,0.499699394825282972032,0.640993578034848687786,0.545534482505224849191,0.712406414725999304061,0.541327043267152530071,0.559595265387262008616,0.641038839512369618134,0.49636940640814530834]

dc.run_and_ret_objs(miu)

from dicedps.plot.common import get_variable_from_doeclim, get_variable_from_dice

dc._mlist[3].temp
from dicedps.plot.common import plt, pd
fig, ax = plt.subplots(1, 1)
temp = {}
temp['doeclim'] = get_variable_from_doeclim(dc, 'temp').mean(axis=1)
temp['dice'] = get_variable_from_dice(dc, 'TATM').mean(axis=1)

pd.DataFrame(temp).plot(ax=ax)
"""